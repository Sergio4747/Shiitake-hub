<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title> Shiitake Hub - Productos Ganoderma Premium | Suplementos Naturales Argentina</title>
    <meta name="description" content=" Compra productos Ganoderma, Shiitake y suplementos naturales premium. Envío gratis a toda Argentina. Melena de León, Spirulina, Aloe Vita y más. ¡Mejora tu salud naturalmente!">
    <meta name="keywords" content="ganoderma, shiitake, melena de león, spirulina, suplementos naturales, hongos medicinales, productos naturales argentina, aloe vit, lemonzhi, café funcional, salud natural">
    <meta name="author" content="Shiitake Hub">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://shiitake-hub.vercel.app/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://shiitake-hub.vercel.app/">
    <meta property="og:title" content=" Shiitake Hub - Productos Ganoderma Premium | Suplementos Naturales">
    <meta property="og:description" content=" Compra productos Ganoderma, Shiitake y suplementos naturales premium. Envío gratis a toda Argentina. Mejora tu salud naturalmente.">
    <meta property="og:image" content="https://shiitake-hub.vercel.app/img/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Shiitake Hub">
    <meta property="og:locale" content="es_AR">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://shiitake-hub.vercel.app/">
    <meta name="twitter:title" content=" Shiitake Hub - Productos Ganoderma Premium">
    <meta name="twitter:description" content=" Suplementos naturales premium. Ganoderma, Shiitake, Melena de León y más. Envíogratis Argentina.">
    <meta name="twitter:image" content="https://shiitake-hub.vercel.app/img/og-image.jpg">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#667eea">
    <meta name="msapplication-TileColor" content="#667eea">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Geo Tags -->
    <meta name="geo.region" content="AR">
    <meta name="geo.country" content="Argentina">
    <meta name="geo.placename" content="Argentina">
    
    <!-- Business Info -->
    <meta name="contact" content="info@shiitakehub.com">
    <meta name="coverage" content="Worldwide">
    <meta name="distribution" content="Global">
    <meta name="rating" content="General">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "Shiitake Hub",
      "description": "Tienda online de productos Ganoderma, Shiitake y suplementos naturales premium en Argentina",
      "url": "https://shiitake-hub.vercel.app",
      "logo": "https://shiitake-hub.vercel.app/img/logo.png",
      "image": "https://shiitake-hub.vercel.app/img/og-image.jpg",
      "telephone": "+54-11-1234-5678",
      "email": "info@shiitakehub.com",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "AR",
        "addressRegion": "Buenos Aires",
        "addressLocality": "Argentina"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "-34.6118",
        "longitude": "-58.3960"
      },
      "openingHours": "Mo-Su 00:00-23:59",
      "paymentAccepted": "Cash, Credit Card, MercadoPago",
      "priceRange": "$",
      "currenciesAccepted": "ARS",
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Productos Ganoderma y Suplementos Naturales",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Product",
              "name": "Shiitake 3 en 1 Lite",
              "description": "Café funcional con hongos Shiitake premium",
              "category": "Suplementos Naturales"
            }
          },
          {
            "@type": "Offer", 
            "itemOffered": {
              "@type": "Product",
              "name": "Melena de León",
              "description": "Suplemento natural para la salud cognitiva",
              "category": "Suplementos Naturales"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Product", 
              "name": "Spirulina en Cápsulas",
              "description": "Superalimento rico en proteínas y nutrientes",
              "category": "Suplementos Naturales"
            }
          }
        ]
      },
      "sameAs": [
        "https://www.facebook.com/shiitakehub",
        "https://www.instagram.com/shiitakehub",
        "https://wa.me/5491234567890"
      ]
    }
    </script>
    
    <!-- Website Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Shiitake Hub",
      "url": "https://shiitake-hub.vercel.app",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://shiitake-hub.vercel.app/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <style>
        /* Ocultar botones de cámara por defecto */
        .image-upload-btn {
            display: none !important;
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* Mostrar botones en modo admin */
        .admin-mode .image-upload-btn {
            display: flex !important;
        }

        .product-card:hover .image-upload-btn,
        .modal-content .image-upload-btn {
            opacity: 1;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }

        .scroll-locked {
            overflow: hidden;
            height: 100vh;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f5f5f4;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #57534e, #44403c);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #44403c, #292524);
        }

        * {
            scrollbar-width: thin;
            scrollbar-color: #57534e #f5f5f4;
        }

        .scroll-indicator {
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }

        .fade-in {
            animation: fadeInUp 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .fade-in-delay-1 {
            animation: fadeInUp 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.3s both;
        }

        .fade-in-delay-2 {
            animation: fadeInUp 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.6s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(60px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .text-glow {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5), 0 0 40px rgba(255, 255, 255, 0.3);
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }

        @keyframes pulseGlow {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
                transform: scale(1);
            }

            50% {
                box-shadow: 0 0 40px rgba(255, 255, 255, 0.6);
                transform: scale(1.05);
            }
        }

        .slide-up {
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-card {
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: translateY(0) rotateX(0deg);
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .product-card:hover {
            transform: translateY(-15px) scale(1.05) rotateX(5deg);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.25), 0 0 40px rgba(87, 83, 78, 0.1);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
            border-radius: 0.75rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .product-card:hover::before {
            opacity: 1;
        }

        .modal {
            backdrop-filter: blur(8px);
            transition: all 0.3s ease-out;
        }

        .modal-content {
            animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .cart-badge {
            animation: pulse 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }

            100% {
                transform: scale(1);
            }
        }

        .btn-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .header-slide {
            animation: headerSlide 0.6s ease-out;
        }

        @keyframes headerSlide {
            from {
                transform: translateY(-100%);
            }

            to {
                transform: translateY(0);
            }
        }

        .product-grid-item {
            opacity: 0;
            transform: translateY(40px) scale(0.6);
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .product-grid-item.animate-in {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .product-grid-item:nth-child(1).animate-in {
            transition-delay: 0.1s;
        }

        .product-grid-item:nth-child(2).animate-in {
            transition-delay: 0.2s;
        }

        .product-grid-item:nth-child(3).animate-in {
            transition-delay: 0.3s;
        }

        .product-grid-item:nth-child(4).animate-in {
            transition-delay: 0.4s;
        }

        .product-grid-item:nth-child(5).animate-in {
            transition-delay: 0.5s;
        }

        .product-grid-item:nth-child(6).animate-in {
            transition-delay: 0.6s;
        }

        .product-grid-item:nth-child(7).animate-in {
            transition-delay: 0.7s;
        }

        .product-grid-item:nth-child(8).animate-in {
            transition-delay: 0.8s;
        }

        .product-grid-item:nth-child(9).animate-in {
            transition-delay: 0.9s;
        }

        .product-grid-item:nth-child(10).animate-in {
            transition-delay: 1.0s;
        }

        .product-grid-item:nth-child(11).animate-in {
            transition-delay: 1.1s;
        }

        .product-grid-item:nth-child(12).animate-in {
            transition-delay: 1.2s;
        }

        .product-grid-item:nth-child(13).animate-in {
            transition-delay: 1.3s;
        }

        .product-grid-item:nth-child(14).animate-in {
            transition-delay: 1.4s;
        }

        .product-grid-item:nth-child(15).animate-in {
            transition-delay: 1.5s;
        }

        .product-grid-item:nth-child(16).animate-in {
            transition-delay: 1.6s;
        }

        .product-grid-item:nth-child(17).animate-in {
            transition-delay: 1.7s;
        }

        .product-grid-item:nth-child(18).animate-in {
            transition-delay: 1.8s;
        }

        .product-grid-item:nth-child(19).animate-in {
            transition-delay: 1.9s;
        }

        .product-grid-item:nth-child(20).animate-in {
            transition-delay: 2.0s;
        }

        .section-header {
            opacity: 0;
            transform: translateY(30px) scale(0.7);
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .section-header.animate-in {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .hero-image {
            animation: heroFloat 8s ease-in-out infinite, heroZoom 15s ease-in-out infinite;
            transition: all 0.3s ease;
        }

        .hero-image:hover {
            transform: scale(1.05);
        }

        /* Ocultar botones de upload para usuarios normales */
        .user-mode .image-upload-btn {
            display: none !important;
        }

        .admin-mode .image-upload-btn {
            display: flex !important;
        }

        @keyframes heroFloat {

            0%,
            100% {
                transform: translateY(0px) scale(1);
            }

            50% {
                transform: translateY(-10px) scale(1.01);
            }
        }

        @keyframes heroZoom {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .parallax-bg {
            animation: parallaxMove 20s ease-in-out infinite;
        }

        @keyframes parallaxMove {

            0%,
            100% {
                transform: translateX(0px) translateY(0px);
            }

            25% {
                transform: translateX(5px) translateY(-5px);
            }

            50% {
                transform: translateX(0px) translateY(-10px);
            }

            75% {
                transform: translateX(-5px) translateY(-5px);
            }
        }

        .modal-image-animate {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-image-animate:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        /* Estilos responsive mejorados */
        @media (max-width: 640px) {
            .product-card {
                padding: 1rem;
            }

            .modal-content {
                margin: 1rem;
                max-height: 85vh;
            }

            .hero-section h2 {
                font-size: 2rem;
                line-height: 1.1;
            }

            .hero-section p {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }

            .grid-responsive {
                grid-template-columns: repeat(1, minmax(0, 1fr));
                gap: 1rem;
            }
        }

        @media (min-width: 641px) and (max-width: 768px) {
            .grid-responsive {
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 1.5rem;
            }
        }

        @media (min-width: 769px) {
            .grid-responsive {
                grid-template-columns: repeat(3, minmax(0, 1fr));
                gap: 2rem;
            }
        }

        .image-upload-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .product-card:hover .image-upload-btn,
        .modal-content .image-upload-btn {
            opacity: 1;
        }

        .image-upload-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, .3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Mejoras para touch devices */
        @media (hover: none) and (pointer: coarse) {
            .product-card:active {
                transform: scale(0.98);
            }

            .btn-hover:active {
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-stone-50 text-stone-800">
    <header class="bg-transparent backdrop-blur-md fixed w-full top-0 z-40 header-slide transition-all duration-300"
        id="header">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-xl md:text-2xl lg:text-3xl font-bold text-white drop-shadow-lg">Shitakii Hub</h1>
                </div>
                <button onclick="toggleCart()"
                    class="relative p-2 text-white hover:text-gray-200 transition-all duration-300 btn-hover drop-shadow-lg">
                    <svg class="w-6 h-6 md:w-7 md:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h12M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6">
                        </path>
                    </svg>
                    <span id="cart-count"
                        class="absolute -top-1 -right-1 bg-white text-stone-800 text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold shadow-lg">0</span>
                </button>
            </div>
        </div>
    </header>

    <section class="hero-section relative h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 parallax-bg">
            <img id="hero-image"
                src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1920&h=1080&fit=crop&crop=center"
                alt="Productos Ganoderma y Shiitake premium - Suplementos naturales orgánicos para mejorar tu salud y bienestar - Shiitake Hub Argentina"
                title="Shiitake Hub - Tienda de productos Ganoderma premium en Argentina"
                loading="eager"
                width="1920"
                height="1080"
                class="w-full h-full object-cover hero-image"
                onerror="this.style.background='linear-gradient(135deg, #f5f5f4, #e7e5e4)'; this.style.display='block';">
            <button class="image-upload-btn" onclick="changeHeroImage()" title="Cambiar imagen de fondo">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                    </path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
            </button>
        </div>

        <div class="absolute inset-0 bg-black bg-opacity-60"></div>

        <div class="relative z-10 text-center max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2
                class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold text-white mb-4 sm:mb-6 fade-in text-glow">
                Nutrición de Calidad
            </h2>
            <p
                class="text-base sm:text-lg md:text-xl lg:text-2xl text-gray-200 mb-6 sm:mb-8 fade-in-delay-1 max-w-3xl mx-auto leading-relaxed">
                Descubre nuestra selección premium de suplementos nutricionales para una vida más saludable
            </p>
            <button onclick="scrollToProducts()"
                class="bg-white text-stone-800 px-4 sm:px-6 md:px-8 py-2 sm:py-3 md:py-4 rounded-lg text-sm sm:text-base md:text-lg font-medium hover:bg-gray-100 transition-all duration-300 btn-hover fade-in-delay-2 pulse-glow floating">
                Explorar Productos
            </button>
        </div>

        <div class="absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 scroll-indicator">
            <div class="flex flex-col items-center text-white cursor-pointer" onclick="scrollToProducts()">
                <svg class="w-6 h-6 sm:w-8 sm:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                </svg>
            </div>
        </div>
    </section>

    <section id="products" class="py-8 sm:py-12 lg:py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12 sm:mb-16 section-header">
                <h3 class="text-3xl sm:text-4xl font-bold text-stone-800 mb-4">Nuestros Productos</h3>
                <p class="text-lg sm:text-xl text-stone-600">Suplementos de alta calidad para tu bienestar</p>
            </div>

            <div class="grid grid-responsive" id="products-grid">

            </div>
        </div>
    </section>

    <!-- Product Modal -->
    <div id="product-modal"
        class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full modal-content">
            <div class="p-4 sm:p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="modal-title" class="text-xl sm:text-2xl font-bold text-stone-800"></h3>
                    <button onclick="closeProductModal()"
                        class="text-stone-400 hover:text-stone-600 transition-colors btn-hover">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <div id="modal-image" class="relative w-full h-48 bg-stone-200 rounded-lg mb-4 overflow-hidden">
                    <img id="modal-product-image" src="img/3en1coffe.webp" alt="Producto nutricional"
                        class="w-full h-full object-cover modal-image-animate"
                        onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjOTk5IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMiAybDMuMDkgNi4yNkwyMiA5LjI3bC01IDQuODcgMS4xOCA2Ljg4TDEyIDE3Ljc3bC02LjE4IDMuMjVMNyAxNC4xNCAyIDkuMjdsNi45MS0xLjAxTDEyIDJ6Ii8+PC9zdmc+'; this.alt='Imagen de producto';">
                    <button class="image-upload-btn opacity-100" onclick="changeProductImage()" title="Cambiar imagen">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                            </path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                    </button>
                </div>

                <p id="modal-description" class="text-sm sm:text-base text-stone-600 mb-4"></p>

                <div class="flex justify-between items-center mb-6">
                    <span id="modal-price" class="text-2xl sm:text-3xl font-bold text-stone-800"></span>
                    <span id="modal-size" class="text-sm sm:text-base text-stone-500"></span>
                </div>

                <div class="flex gap-4">
                    <div class="flex items-center border border-stone-300 rounded-lg">
                        <button onclick="decreaseQuantity()"
                            class="px-3 py-2 text-stone-600 hover:text-stone-800 transition-colors">-</button>
                        <span id="modal-quantity" class="px-4 py-2 border-l border-r border-stone-300">1</span>
                        <button onclick="increaseQuantity()"
                            class="px-3 py-2 text-stone-600 hover:text-stone-800 transition-colors">+</button>
                    </div>
                    <button onclick="addToCart()"
                        class="flex-1 bg-stone-800 text-white py-2 px-4 rounded-lg hover:bg-stone-700 transition-all duration-300 btn-hover">
                        Agregar al Carrito
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal"
        class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-2xl w-full modal-content">
            <div class="p-4 sm:p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-800">Carrito de Compras</h3>
                    <button onclick="closeCart()"
                        class="text-stone-400 hover:text-stone-600 transition-colors btn-hover">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <div id="cart-items" class="space-y-4 mb-6 max-h-60 sm:max-h-80 overflow-y-auto">
                </div>

                <div class="border-t border-stone-200 pt-4">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-lg sm:text-xl font-semibold text-stone-800">Total:</span>
                        <span id="cart-total" class="text-xl sm:text-2xl font-bold text-stone-800">$0.00</span>
                    </div>

                    <button onclick="proceedToCheckout()"
                        class="w-full bg-stone-800 text-white py-2 sm:py-3 px-4 rounded-lg hover:bg-stone-700 transition-all duration-300 text-base sm:text-lg font-medium btn-hover">
                        Proceder al Pago
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal"
        class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full modal-content">
            <div class="p-4 sm:p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-800">Finalizar Compra</h3>
                    <button onclick="closeCheckout()"
                        class="text-stone-400 hover:text-stone-600 transition-colors btn-hover">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form onsubmit="processPayment(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1">Nombre Completo</label>
                        <input type="text" id="buyer-name" required
                            class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-500 transition-all duration-300">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1">Email</label>
                        <input type="email" id="buyer-email" required
                            class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-500 transition-all duration-300">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1">Teléfono</label>
                        <input type="tel" id="buyer-phone" required
                            class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-500 transition-all duration-300">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1">Dirección</label>
                        <input type="text" id="buyer-address" required
                            class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-500 transition-all duration-300">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-stone-700 mb-1">Ciudad</label>
                            <input type="text" id="buyer-city" required
                                class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-500 transition-all duration-300">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-stone-700 mb-1">Código Postal</label>
                            <input type="text" id="buyer-zip" required
                                class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-500 transition-all duration-300">
                        </div>
                    </div>

                    <div class="border-t border-stone-200 pt-4 mt-6">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-lg font-semibold text-stone-800">Total a Pagar:</span>
                            <span id="checkout-total" class="text-xl font-bold text-stone-800">$0.00</span>
                        </div>

                        <button type="submit" id="pay-button"
                            class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-all duration-300 text-lg font-medium btn-hover flex items-center justify-center">
                            <span id="button-text">Pagar con MercadoPago</span>
                            <span id="loading-spinner" class="loading-spinner hidden ml-2"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal"
        class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full modal-content">
            <div class="p-4 sm:p-6 text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-stone-800 mb-2">¡Compra Exitosa!</h3>
                <p class="text-sm sm:text-base text-stone-600 mb-6">Tu pedido ha sido procesado correctamente. Recibirás
                    un email de confirmación pronto.</p>
                <button onclick="closeSuccess()"
                    class="bg-stone-800 text-white py-2 px-6 rounded-lg hover:bg-stone-700 transition-all duration-300 btn-hover">
                    Continuar Comprando
                </button>
            </div>
        </div>
    </div>


    <input type="file" id="hero-image-input" accept="image/*" style="display: none;"
        onchange="handleHeroImageUpload(event)">
    <input type="file" id="product-image-input" accept="image/*" style="display: none;"
        onchange="handleProductImageUpload(event)">

    <script>

        function deactivateAdminMode() {
            isAdminMode = false;
            document.body.classList.remove('admin-mode');
            alert('Modo administrador DESACTIVADO');


            document.querySelectorAll('.image-upload-btn').forEach(btn => {
                btn.style.display = 'none';
            });
        }

        const mp = new MercadoPago('APP_USR-bdc4116b-84f9-4264-9e7f-baf005b60d4c', {
            locale: 'es-AR'
        });

        // Productos cargados dinámicamente desde la API
        let products = {};

        // Función para cargar productos desde la API
        async function loadProducts() {
            try {
                const response = await fetch('/api/products');
                const newProducts = await response.json();
                products = newProducts;
                generateProductGrid();
            } catch (error) {
                console.error('Error al cargar productos:', error);
                // Mantener productos actuales si falla la carga
            }
        }

        let cart = [];
        let currentProduct = null;
        let modalQuantity = 1;
        let currentProductId = null;

        document.addEventListener('DOMContentLoaded', function () {
            loadProducts(); // Carga productos desde la API
            initializeObservers();
            updateCartCount();
        });


        function generateProductGrid() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';

            Object.keys(products).forEach((id, index) => {
                const product = products[id];
                const productCard = document.createElement('div');
                productCard.className = 'product-card product-grid-item bg-stone-50 rounded-xl p-4 sm:p-6 cursor-pointer relative overflow-hidden';
                productCard.onclick = () => openProductModal(id);

                productCard.innerHTML = `
            <div class="relative w-full h-40 sm:h-48 bg-stone-200 rounded-lg mb-4 overflow-hidden">
                <img src="${product.image}" 
                    alt="${product.name}" 
                    class="w-full h-full object-cover transition-transform duration-300 hover:scale-110"
                    onerror="this.src='https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=300&fit=crop&crop=center'; this.alt='Producto nutricional';">
                <button class="image-upload-btn" onclick="changeProductGridImage(${id}); event.stopPropagation();" title="Cambiar imagen">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                </button>
            </div>
            <h4 class="text-lg sm:text-xl font-semibold text-stone-800 mb-2">${product.name}</h4>
            <p class="text-sm sm:text-base text-stone-600 mb-4">${product.description}</p>
            <div class="flex justify-between items-center">
                <span class="text-xl sm:text-2xl font-bold text-stone-800">$${product.price}</span>
                <span class="text-xs sm:text-sm text-stone-500">${product.size}</span>
            </div>
        `;

                grid.appendChild(productCard);
            });
        }


        function initializeObservers() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);

            const sectionHeaders = document.querySelectorAll('.section-header');
            sectionHeaders.forEach(header => observer.observe(header));

            const productCards = document.querySelectorAll('.product-grid-item');
            productCards.forEach(card => observer.observe(card));
        }


        function changeHeroImage() {
            document.getElementById('hero-image-input').click();
        }

        function handleHeroImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    document.getElementById('hero-image').src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        function changeProductImage() {
            document.getElementById('product-image-input').click();
        }

        function changeProductGridImage(productId) {
            currentProductId = productId;
            document.getElementById('product-image-input').click();
        }

        function handleProductImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const newImageSrc = e.target.result;


                    if (currentProductId) {
                        products[currentProductId].image = newImageSrc;


                        const gridImage = document.querySelector(`[onclick="openProductModal(${currentProductId})"] img`);
                        if (gridImage) {
                            gridImage.src = newImageSrc;
                        }
                    }


                    const modalImage = document.getElementById('modal-product-image');
                    if (modalImage && currentProduct) {
                        modalImage.src = newImageSrc;
                        currentProduct.image = newImageSrc;
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        function scrollToProducts() {
            document.body.classList.remove('scroll-locked');

            const productsSection = document.getElementById('products');
            const targetPosition = productsSection.offsetTop - 80;
            const startPosition = window.pageYOffset;
            const distance = targetPosition - startPosition;
            const duration = 1500;
            let start = null;

            function easeInOutCubic(t) {
                return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
            }

            function animation(currentTime) {
                if (start === null) start = currentTime;
                const timeElapsed = currentTime - start;
                const progress = Math.min(timeElapsed / duration, 1);

                const ease = easeInOutCubic(progress);
                window.scrollTo(0, startPosition + distance * ease);

                if (timeElapsed < duration) {
                    requestAnimationFrame(animation);
                }
            }

            requestAnimationFrame(animation);
        }


        function openProductModal(productId) {
            currentProduct = products[productId];
            currentProductId = productId;
            modalQuantity = 1;

            document.getElementById('modal-title').textContent = currentProduct.name;
            document.getElementById('modal-description').textContent = currentProduct.description;
            document.getElementById('modal-price').textContent = `$${currentProduct.price}`;
            document.getElementById('modal-size').textContent = currentProduct.size;
            document.getElementById('modal-quantity').textContent = modalQuantity;

            const modalImage = document.getElementById('modal-product-image');
            modalImage.src = currentProduct.image;
            modalImage.alt = currentProduct.name;

            document.getElementById('product-modal').classList.remove('hidden');
        }

        function closeProductModal() {
            document.getElementById('product-modal').classList.add('hidden');
            currentProduct = null;
            currentProductId = null;
            modalQuantity = 1;
        }

        function increaseQuantity() {
            modalQuantity++;
            document.getElementById('modal-quantity').textContent = modalQuantity;
        }

        function decreaseQuantity() {
            if (modalQuantity > 1) {
                modalQuantity--;
                document.getElementById('modal-quantity').textContent = modalQuantity;
            }
        }

        function addToCart() {
            if (currentProduct) {
                const existingItem = cart.find(item => item.id === currentProductId);

                if (existingItem) {
                    existingItem.quantity += modalQuantity;
                } else {
                    cart.push({
                        id: currentProductId,
                        name: currentProduct.name,
                        price: currentProduct.price,
                        size: currentProduct.size,
                        quantity: modalQuantity
                    });
                }

                updateCartCount();
                closeProductModal();

                document.getElementById('cart-count').classList.add('cart-badge');
                setTimeout(() => {
                    document.getElementById('cart-count').classList.remove('cart-badge');
                }, 300);
            }
        }


        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        function toggleCart() {
            updateCartDisplay();
            document.getElementById('cart-modal').classList.remove('hidden');
        }

        function closeCart() {
            document.getElementById('cart-modal').classList.add('hidden');
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');

            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-stone-500 text-center py-8">Tu carrito está vacío</p>';
                cartTotal.textContent = '$0.00';
                return;
            }

            let total = 0;
            cartItems.innerHTML = cart.map((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;

                return `
            <div class="flex items-center justify-between p-4 bg-stone-50 rounded-lg">
                <div class="flex-1">
                    <h4 class="font-semibold text-stone-800">${item.name}</h4>
                    <p class="text-sm text-stone-600">${item.size}</p>
                    <p class="text-stone-800">$${item.price} x ${item.quantity}</p>
                </div>
                <div class="flex items-center gap-2">
                    <span class="font-semibold text-stone-800">$${itemTotal.toFixed(2)}</span>
                    <button onclick="removeFromCart(${index})" class="text-red-500 hover:text-red-700 ml-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        `;
            }).join('');

            cartTotal.textContent = `$${total.toFixed(2)}`;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartCount();
            updateCartDisplay();
        }


        function proceedToCheckout() {
            if (cart.length === 0) {
                alert('Tu carrito está vacío');
                return;
            }

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('checkout-total').textContent = `$${total.toFixed(2)}`;
            document.getElementById('checkout-modal').classList.remove('hidden');
            closeCart();
        }

        function closeCheckout() {
            document.getElementById('checkout-modal').classList.add('hidden');
        }



        async function processPayment(event) {
            event.preventDefault();

            const payButton = document.getElementById('pay-button');
            const buttonText = document.getElementById('button-text');
            const loadingSpinner = document.getElementById('loading-spinner');


            buttonText.textContent = 'Procesando...';
            loadingSpinner.classList.remove('hidden');
            payButton.disabled = true;

            try {

                const buyerData = {
                    name: document.getElementById('buyer-name').value,
                    email: document.getElementById('buyer-email').value,
                    phone: {
                        number: document.getElementById('buyer-phone').value
                    },
                    address: {
                        street_name: document.getElementById('buyer-address').value,
                        zip_code: document.getElementById('buyer-zip').value,
                        city_name: document.getElementById('buyer-city').value // ← Cambiado a city_name
                    }
                };


                const itemsForMP = cart.map(item => ({
                    id: item.id.toString(),
                    title: item.name,
                    unit_price: parseFloat(item.price),
                    quantity: item.quantity,
                    currency_id: "ARS",
                    description: item.size
                }));


                const response = await fetch('/create_preference', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        items: itemsForMP,
                        payer: buyerData
                    }),
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Error al crear la preferencia de pago');
                }

                const preference = await response.json();

                // Enviar notificación por WhatsApp
                try {
                    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0).toFixed(2);
                    
                    const whatsappData = {
                        buyerData: {
                            name: document.getElementById('buyer-name').value,
                            email: document.getElementById('buyer-email').value,
                            phone: document.getElementById('buyer-phone').value,
                            address: document.getElementById('buyer-address').value,
                            city: document.getElementById('buyer-city').value,
                            zip: document.getElementById('buyer-zip').value
                        },
                        cartItems: cart,
                        total: total
                    };

                    const whatsappResponse = await fetch('/send-whatsapp-notification', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(whatsappData)
                    });

                    if (whatsappResponse.ok) {
                        const whatsappResult = await whatsappResponse.json();
                        // Abrir WhatsApp en una nueva pestaña
                        window.open(whatsappResult.whatsappUrl, '_blank');
                    }
                } catch (whatsappError) {
                    console.error("Error al enviar WhatsApp:", whatsappError);
                    // Continuar con el pago aunque falle WhatsApp
                }

                // Enviar email de confirmación al cliente
                try {
                    const emailResponse = await fetch('/send-confirmation-email', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(whatsappData) // Usar los mismos datos
                    });

                    if (emailResponse.ok) {
                        console.log("Email de confirmación enviado exitosamente");
                    }
                } catch (emailError) {
                    console.error("Error al enviar email:", emailError);
                    // Continuar con el pago aunque falle el email
                }

                window.location.href = `https://www.mercadopago.com.ar/checkout/v1/redirect?pref_id=${preference.id}`;

            } catch (error) {
                console.error("Error en el proceso de pago:", error);
                alert("Hubo un error al intentar procesar el pago: " + error.message);

                buttonText.textContent = 'Pagar con MercadoPago';
                loadingSpinner.classList.add('hidden');
                payButton.disabled = false;
            }
        }

        function closeSuccess() {
            document.getElementById('success-modal').classList.add('hidden');
        }

        document.addEventListener('click', function (event) {
            if (event.target.classList.contains('modal')) {
                if (event.target.id === 'product-modal') closeProductModal();
                if (event.target.id === 'cart-modal') closeCart();
                if (event.target.id === 'checkout-modal') closeCheckout();
                if (event.target.id === 'success-modal') closeSuccess();
            }
        });

        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                closeProductModal();
                closeCart();
                closeCheckout();
                closeSuccess();
            }
        });

        window.addEventListener('scroll', function () {
            const header = document.getElementById('header');
            if (window.scrollY > 100) {
                header.classList.add('bg-white/90', 'shadow-lg');
                header.classList.remove('bg-transparent');
                header.querySelector('h1').classList.remove('text-white');
                header.querySelector('h1').classList.add('text-stone-800');
                header.querySelector('button').classList.remove('text-white', 'hover:text-gray-200');
                header.querySelector('button').classList.add('text-stone-600', 'hover:text-stone-800');
                header.querySelector('#cart-count').classList.add('bg-stone-800', 'text-white');
            } else {
                header.classList.remove('bg-white/90', 'shadow-lg');
                header.classList.add('bg-transparent');
                header.querySelector('h1').classList.add('text-white');
                header.querySelector('h1').classList.remove('text-stone-800');
                header.querySelector('button').classList.add('text-white', 'hover:text-gray-200');
                header.querySelector('button').classList.remove('text-stone-600', 'hover:text-stone-800');
                header.querySelector('#cart-count').classList.add('bg-white', 'text-stone-800');
                header.querySelector('#cart-count').classList.remove('bg-stone-800', 'text-white');
            }
        });

        window.addEventListener('load', function () {
            const urlParams = new URLSearchParams(window.location.search);
            const status = urlParams.get('status');

            if (status === 'success') {
                document.getElementById('success-modal').classList.remove('hidden');
                cart = [];
                updateCartCount();
            } else if (status === 'failure') {
                alert('El pago no pudo ser procesado. Por favor, intenta nuevamente.');
            } else if (status === 'pending') {
                alert('Tu pago está siendo procesado. Te notificaremos cuando se complete.');
            }
        });

        if ('ontouchstart' in window) {
            document.body.classList.add('touch-device');
        }

        function handleViewportChange() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        window.addEventListener('resize', handleViewportChange);
        handleViewportChange();
    </script>


</body>

</html>